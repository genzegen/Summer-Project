{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BYR3D | Home</title>
    <link rel="stylesheet" href="{% static 'css/mainpage.css' %}" />
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
    <link rel="stylesheet" href="{% static 'css/partials/setting.css' %}">
    <link rel="stylesheet" href="{% static 'css/partials/my-projects.css' %}">
    <link rel="stylesheet" href="{% static 'css/partials/screenshots.css' %}">
    <script type="module" src="/static/js/three.js-master/build/three.module.js?v=1.0"></script>
</head>

<body>
    <canvas id="particleCanvas"></canvas>
    <div class="main">
        <div class="navbar">
            <div class="left">
                <a href="{% url 'mainpage' %}">
                    <img src="{% static 'images/logo.png' %}" style="height: 10vh; width: auto" />
                </a>
                <a href="{% url 'community' %}">Discover Ideas</a>
                <a href="{% url 'contact' %}">Contact Us</a>
                <a href="{% url "help" %}">Help Center</a>
            </div>
            <div class="right">
                <button class="nav-button" id="notification">
                    <img src="{% static 'images/notification.png' %}" />
                </button>
                {% comment %} profile section {% endcomment %}
                <button class="nav-button" id="profile-img">
                    {% if profile.profile_picture %}
                        <img src="{{ profile.profile_picture.url }}" alt="Profile Picture" />
                    {% else %}
                        <img src="{% static 'images/default-profile.jpg' %}" alt="Default Profile Picture" />
                    {% endif %}
                </button>
                {% if user.is_authenticated %}
                <div class="popup" id="profile">
                    <div class="pop-content">
                        <div id="profile-pop-content">
                            <button id="close-profile">&#10006;</button>
                            <div class="profile-img">
                                {% if profile.profile_picture %}
                                    <img src="{{ profile.profile_picture.url }}" alt="Profile Picture" />
                                {% else %}
                                    <img src="{% static 'images/default-profile.jpg' %}" alt="Default Profile Picture" />
                                {% endif %}
                            </div>
                            <div class="profile-details">
                                <p style="font-size: 1.5rem;">{{ user.username }}</p>
                                <p id="about-user">{{ profile.bio }}</p>
                                <form method="POST" action="{% url 'getStarted' %}">
                                    {% csrf_token %}
                                    <input type="hidden" name="form_type" value="logout">
                                    <button id="logout-btn" class="button" style="width: 14vw; margin-top: 5vh; bottom: 2vh;">Log Out</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                <button class="nav-button" id="new-proj">+ New Project</button>

                <div class="popup" id="new-project-popup">
                    <div class="pop-content">
                        <button id="close-popup">&#10006;</button>
                        <h1 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; font-size: 1.6rem;">
                            Create your project
                        </h1>

                        <form method="POST" action="{% url 'mainpage' %}" style="display: flex; flex-direction: column; align-items: start;">
                            {% csrf_token %}
                            <p style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Give a unique name for your project</p>
                            <input id="project-title" name="title" type="text" placeholder="Project Name" required style="
                                font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; width: 20vw; height: 3vh; font-size: 1.1rem; padding: 1%;
                            " /><br>

                            <p style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Add description</p>
                            <textarea name="description" placeholder="About your project (Max 300 letters)" maxlength="300" required style="
                                font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; width: 24vw; height: 15vh; font-size: 1.1rem; padding: 1.5%; text-align: left;
                            "></textarea>

                            <button type="submit" id="create-proj-btn" class="button" style="width: 14vw; margin-top: 5%;">Create Project</button>
                        </form>
                    </div>
                </div>

            </div>
        </div>
        <div class="content">
            <div class="sidebar">
                <div class="sidebar-content">
                    <button class="button" data-page="{% url 'my-projects' %}">
                        My Projects
                    </button>
                    <button class="button" data-page="{% url 'templates' %}">
                        Templates
                    </button>
                    <button class="button" data-page="{% url 'screenshots' %}">
                        Screenshots
                    </button>
                    <button class="button" data-page="{% url 'settings' %}">
                        Manage Your Account
                    </button>
                </div>
                <button id="sidebar-btn">â—€</button>
            </div>

            {% if error %}
                <div id="error-message" class="error-message">
                    <img src="{% static "images/wrong.png" %}">
                    <p>{{ error }}</p>
                </div>
            {% endif %}

            {% if success %}
                <div class="success-message" id="success-message">
                    <img src="{% static "images/correct.png" %}" alt="">
                    <p>{{ success }}</p>
                </div>
            {% endif %}

            <div class="scroll-content" id="scroll-content">

                {% block content %}
                <!-- Default content goes here -->
                {% endblock %}

            </div>
        </div>
    </div>
    <script type="module" src="{% static 'js/home.js' %}"></script>
    <script>var homeUrl = "{% url 'my-projects' %}";</script>
    <script src="{% static 'js/mainpage.js' %}"></script>
    <script src="{% static 'js/profile.js' %}"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Your existing code here
            {% if error %}
                document.getElementById("error-message").style.display = "flex";
                setTimeout(function() {
                    document.getElementById("error-message").style.display = "none";
                }, 3500);
            {% endif %}

            {% if success %}
                console.log("Success");
                document.getElementById("success-message").style.display = "flex";
                setTimeout(function() {
                    document.getElementById("success-message").style.display = "none";
                }, 3500);
            {% endif %}
        });
    
    </script>

</body>

</html>
